
import pandas as pd
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.pipeline import make_pipeline
from sklearn.preprocessing import LabelEncoder
from sklearn.linear_model import LogisticRegression
import streamlit as st
import random  # ูุฅุฎุชูุงุฑ ูุต ุงูุญูู ุจุดูู ุนุดูุงุฆู

# ุชุญููู ุงูุจูุงูุงุช
df = pd.read_csv("jugements_maroc.csv")

# ูุนุงูุฌุฉ ูุตูุต ุงูููุงุฆุน + ููุน ุงููุถูุฉ
df["input_text"] = df["type_cause"] + " " + df["faits"]

# ุชุญููู ุงูุญูู ุฅูู ุฃุฑูุงู
le = LabelEncoder()
y = le.fit_transform(df["jugement"])

# ุจูุงุก ุงููููุฐุฌ
pipeline = make_pipeline(
    TfidfVectorizer(),
    LogisticRegression()
)
pipeline.fit(df["input_text"], y)

# ูุงุฌูุฉ ุงููุณุชุฎุฏู
st.title("๐ฎ ุชุทุจูู ุชููุน ููุทูู ุงูุฃุญูุงู ุงููุถุงุฆูุฉ ุงููุบุฑุจูุฉ (ุจุณูุท)")
st.write("ุฃุฏุฎู ููุน ุงููุถูุฉ ูุงูููุงุฆุน ุซู ุงุถุบุท ุนูู 'ุชููุน ุงูุญูู'")

# ุงุฎุชูุงุฑ ููุน ุงููุถูุฉ
type_cause = st.selectbox("๐ ููุน ุงููุถูุฉ", ["ูุฑุงุก", "ุทูุงู", "ุนูุงุฑ", "ุฌูุงุฆู"])

# ุฅุฏุฎุงู ุงูููุงุฆุน
faits_input = st.text_area("โ๏ธ ููุงุฆุน ุงููุถูุฉ")

# ูุงุฆุญุฉ ุตูุบ ููุทูู ุงูุฃุญูุงู (ููุงุฐุฌ ุฌุงูุฒุฉ)
motifs = [
    "ููุฐู ุงูุฃุณุจุงุจ ุญููุช ุงููุญููุฉ ุนูููุง ุงุจุชุฏุงุฆููุง ุจูุจูู ุงูุฏุนูู ุดููุงู ูุฑูุถูุง ููุถูุนูุง.",
    "ุญููุช ุงููุญููุฉ ุจุนุฏู ูุจูู ุงูุทูุจ ูุนุฏู ุฅุซุจุงุช ุงูุตูุฉ.",
    "ุญููุช ุงููุญููุฉ ุจูุจูู ุงูุฏุนูู ุดููุงู ูููุถูุนูุงุ ูุงูุญูู ุนูู ุงููุฏุนู ุนููู ุจุฃุฏุงุก ูุจูุบ ุงูุชุนููุถ ุงููุญููู ุจู.",
    "ููุฐู ุงูุฃุณุจุงุจ ุญููุช ุงููุญููุฉ ุจุนุฏู ุงูุงุฎุชุตุงุต ุงูููุนู ูุฅุญุงูุฉ ุงูููู ุนูู ุงููุญููุฉ ุงููุฎุชุตุฉ.",
    "ููุฐู ุงูุฃุณุจุงุจ ุญููุช ุงููุญููุฉ ุจูุจูู ุงูุงุณุชุฆูุงู ุดููุงู ูุฑูุถู ููุถูุนูุง.",
    "ุญููุช ุงููุญููุฉ ุจุชุฃููุฏ ุงูุญูู ุงููุณุชุฃูู.",
    "ููุฐู ุงูุฃุณุจุงุจ ุญููุช ุงููุญููุฉ ุจุฅูุบุงุก ุงููุฑุงุฑ ุงูุฅุฏุงุฑู ุงููุทุนูู ููู.",
    "ุญููุช ุงููุญููุฉ ุจุนุฏู ูุจูู ุงูุฏุนูู ูุนุฏู ุงุณุชููุงุก ุงูุฅุฌุฑุงุกุงุช ุงูุดูููุฉ.",
    "ููุฐู ุงูุฃุณุจุงุจ ุญููุช ุงููุญููุฉ ุจุดุทุจ ุงูุฏุนูู ูู ุงูุฌุฏูู.",
    "ููุฐู ุงูุฃุณุจุงุจ ุญููุช ุงููุญููุฉ ุจูุจูู ุงูุทูุจ ุฌุฒุฆููุง ูุฅูุฒุงู ุงููุฏุนู ุนููู ุจุฃุฏุงุก ูุจูุบ ูุฏุฑู 20.000 ุฏุฑูู ูุน ุงูููุงุฆุฏ ุงููุงููููุฉ.",
    "ุญููุช ุงููุญููุฉ ุจุนุฏู ูุจูู ุงูุงุณุชุฆูุงู ููุฑูุฏู ุฎุงุฑุฌ ุงูุฃุฌู ุงููุงูููู.",
    "ููุฐู ุงูุฃุณุจุงุจ ุญููุช ุงููุญููุฉ ุจุนุฏู ูุจูู ุงูุทูุจ ูุนุฏู ุชููุฑ ุงููุตูุญุฉ.",
    "ููุฐู ุงูุฃุณุจุงุจ ุญููุช ุงููุญููุฉ ุจุฑูุถ ุงูุทูุจ ูุชุญููู ุงููุฏุนู ุตุงุฆุฑ ุงูุฏุนูู."
]

# ุฒุฑ ุงูุชููุน
if st.button("๐ฎ ุชููุน ุงูุญูู"):
    if faits_input.strip() == "":
        st.warning("โ๏ธ ูู ูุถูู ุฃุฏุฎู ููุงุฆุน ุงููุถูุฉ ุฃููุงู.")
    else:
        motif = random.choice(motifs)
        st.success(f"๐ ููุทูู ุงูุญูู ุงููุชููุน:\n\n{motif}")
